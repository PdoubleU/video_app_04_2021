(this.webpackJsonpvideo_app_04_2021=this.webpackJsonpvideo_app_04_2021||[]).push([[0],{61:function(e,t,i){},62:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i.n(a),r=i(14),c=i.n(r),s=i(7),l=i(20),o=i(63),d=i(64),u=i(65),j=i(66),b=i(67),h=i(68),m=i(69),p=i(2);var O=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),i=t[0],n=t[1],r=function(){n(!i)};return Object(p.jsx)("header",{className:"d-block",children:Object(p.jsxs)(o.a,{className:"fixed-top bg-dark ",light:!0,expand:"md",children:[Object(p.jsx)(d.a,{className:"text-light",tag:l.b,to:"/",children:"Video App"}),Object(p.jsx)(u.a,{onClick:r}),Object(p.jsx)(j.a,{isOpen:i,navbar:!0,children:Object(p.jsxs)(b.a,{className:"ml-auto",navbar:!0,children:[Object(p.jsx)(h.a,{children:Object(p.jsx)(m.a,{className:"text-light",tag:l.b,to:"/",onClick:r,children:"Main"})}),Object(p.jsx)(h.a,{children:Object(p.jsx)(m.a,{className:"text-light",tag:l.b,to:"/movie-list",onClick:r,children:"List"})})]})})]})})};var f=function(){return Object(p.jsx)("footer",{className:"footer position-absolute w-100 bg-light ",children:Object(p.jsx)("div",{className:"container px-5 py-3",children:Object(p.jsx)("p",{className:"text-muted text-center m-0",children:"App author: Piotr Witasik/PdoubleU \xa9 2021"})})})};var v=function(e){var t=e.children;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(O,{}),t,Object(p.jsx)(f,{})]})},x=i(75),g=i(76),k=i(77),y=i(78),w=i(70),N=i(34);var S=function(e){var t=e.handleClick,i=e.tagName,a=e.route,n=e.id,r=void 0===n?"":n,c=e.type,s=void 0===c?"button":c,l=e.value,o=void 0===l?"":l,d=e.target,u=void 0===d?"":d,j=e.faIcon,b=void 0===j?"":j;return Object(p.jsxs)(w.a,{outline:!0,onClick:t,tag:i,to:a,id:r,type:s,target:u,icon:b,children:[o,b?Object(p.jsx)(N.a,{icon:b,size:"sm"}):null]})},C=i(35),D=i(16),M=i.n(D),E=i(22),L=i(38),_=i(39);var I=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),i=t[0],n=t[1],r=Object(a.useState)(!1),c=Object(s.a)(r,2),l=c[0],o=c[1],d=Object(a.useState)(!1),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(""),m=Object(s.a)(h,2),p=m[0],O=m[1];return[{data:i,apiProvider:p,isLoading:l,isError:j,resetErrorAlert:function(){b(!1)},fetchData:function(){var e=Object(E.a)(M.a.mark((function e(t,i,a){var r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),O(a),e.prev=2,e.next=5,fetch(t,Object(_.a)({},i));case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),b(!0),console.log(e.t0);case 15:n(c),o(!1);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,i,a){return e.apply(this,arguments)}}()}]},J=i(0),A=i.n(J),F=["F-yeKCV2Mrk","TUfyUUauuoY","3E1vOhBcsdg","FJe99BjV8bM","VRzbQYmgJ2Q","KTT7i3SKpMQ","vyKj-WsStFc","facmiPgeMNM","hd0fXhDkH84","Zfm_y0OJmN4","luW--mtTPtA","0_0imzGKNjA","tJJiGL8orfY","n-kg9zhq-xE","EMAlaNCMSgE","JbBKOJH4dh0","P8vGytRX7S0","ErsxQkch7ec","ugHGotF7tR0","oIMaTKOZG-8","_308KNAuFkg","spjp49HFd84","iPMiD3Wu74Q","r874E6s4cQ","4DKkueqcKmQ","h3RG5dztrXM","535769506","220555992","226441556","248465461","87452303","99144904","241916506","1522709","43974197","71715434","99227117","139592600","476216027","137623605","287060952","188653769","259132930","11768506","301188466","111481788","44026236","388213806","230586645","233459603","211452489"],V={youtube_input:new RegExp("^https://www.youtube.com/watch\\?v=\\S{11}$|^https://youtu.be/\\S{11}$|^\\S{11}$"),vimeo_input:new RegExp("^https://vimeo.com/\\d{7,9}$|^\\d{7,9}$"),youtube_id:new RegExp("\\S{11}$"),vimeo_id:new RegExp("\\d{7,9}$")},P=function(e){var t,i,a="",n="",r="",c={};if(t=V.youtube_input.test(e),!(i=V.vimeo_input.test(e))&&!t)return[null,null,null];if(t){n="youtube";var l=function(e){var t=new URL("https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails%2Cstatistics"),i={id:e,key:"AIzaSyDNWcIK3yQv5jmxhAz0DjXVZSDOAFLhOgs"};return Object.keys(i).forEach((function(e){return t.searchParams.append(e,i[e])})),[t,{}]}(a=e.match(V.youtube_id)),o=Object(s.a)(l,2);r=o[0],c=o[1]}if(i){n="vimeo";var d=function(e){return["https://api.vimeo.com/videos/".concat(e),{method:"GET",credentials:"same-origin",headers:{Authorization:"bearer ".concat("c6ca95052e66b9ed4a87119e72d793dc")}}]}(a=e.match(V.vimeo_id)),u=Object(s.a)(d,2);r=u[0],c=u[1]}return[r,c,a,n]};P.propTypes={input:A.a.string.isRequired};var R=function(e){if(e){var t=(new Date).toLocaleDateString("en-US").split("/"),i=Object(s.a)(t,3),a=i[0],n=i[1],r=i[2];return n=c(1,30),a=c(0,11),e.addDate=n+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(a)+1]+" "+r,e.isLiked=!1,e}function c(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}};R.propTypes={item:A.a.object.isRequired};var U=function(e,t){if(e){var i={id:"",snippet:{title:"",thumbnails:{standard:{url:""}}},statistics:{viewCount:"0",likeCount:"0"}};return"vimeo"===t?(i.id=e.uri.match(V.vimeo_id)[0],i.snippet.title=e.name,i.statistics.viewCount=e.metadata.connections.likes.total,i.statistics.likeCount=e.metadata.connections.likes.total,i.snippet.thumbnails.standard.url=e.pictures.sizes[3].link,i.iframe="https://player.vimeo.com/video/".concat(i.id,"?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=213205"),R(i)):(i.id=e.items[0].id,i.snippet.title=e.items[0].snippet.title,i.statistics.viewCount=e.items[0].statistics.viewCount,i.statistics.likeCount=e.items[0].statistics.likeCount,i.snippet.thumbnails.standard.url=e.items[0].snippet.thumbnails.standard.url,i.iframe="https://www.youtube.com/embed/".concat(i.id),R(i))}};U.propTypes={data:A.a.object.isRequired,provider:A.a.string.isRequired};var T=n.a.createContext({getStoredMovies:[],getFilteredMovies:[],deleteMovie:function(){},getMovieData:function(){},toggleLike:function(){},emptyList:function(){},loadDemo:function(){},sortByDate:function(){},isLoading:!1,isError:!1,resetErrorAlert:function(){}}),B=function(e){var t=e.children,i=Object(a.useState)(JSON.parse(window.localStorage.getItem("movies")||null)),n=Object(s.a)(i,2),r=n[0],c=n[1],l=I(),o=Object(s.a)(l,1)[0],d=o.data,u=o.apiProvider,j=o.isLoading,b=o.isError,h=o.resetErrorAlert,m=o.fetchData;Object(a.useEffect)((function(){O(U(d,u))}),[d]),Object(a.useEffect)((function(){!function(e){window.localStorage.setItem("movies",JSON.stringify(e))}(r)}),[r]);var O=function(e){e&&c(r?[].concat(Object(L.a)(r),[e]):[e])},f=function(){var e=Object(E.a)(M.a.mark((function e(t,i){var a,n,c,l,o,d;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),a=P(i),n=Object(s.a)(a,4),c=n[0],l=n[1],o=n[2],d=n[3],c||l||o){e.next=4;break}return e.abrupt("return");case 4:if(!r||!r.some((function(e){return e.id===o}))){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,m(c,l,d);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),v=function(){var e=Object(E.a)(M.a.mark((function e(){var t,i,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(C.a)(F),e.prev=1,t.s();case 3:if((i=t.n()).done){e.next=9;break}return a=i.value,e.next=7,f(null,a);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(T.Provider,{value:{getStoredMovies:function(){return r||null},getFilteredMovies:function(){return r?r.filter((function(e){return!0===e.isLiked})):null},deleteMovie:function(e){e.preventDefault();var t=e.target.parentElement.id,i=JSON.parse(JSON.stringify(r)),a=i.findIndex((function(e){return e.id===t}));i.splice(a,1),c(i)},getMovieData:f,toggleLike:function(e){e.preventDefault();var t=e.target.parentElement.id,i=JSON.parse(JSON.stringify(r)),a=i.findIndex((function(e){return e.id===t}));i[a].isLiked=!i[a].isLiked,c(i)},emptyList:function(){c(null)},loadDemo:v,sortByDate:function(e){var t=JSON.parse(JSON.stringify(r));return e?(t.sort((function(e,t){return new Date(e.addDate)-new Date(t.addDate)})),c(t)):(t.sort((function(e,t){return new Date(t.addDate)-new Date(e.addDate)})),c(t))},isLoading:j,isError:b,resetErrorAlert:h},children:t})},K=i(71),z=function(e){var t=e.id,i=e.handleModal,n=e.likeIconMode,r=Object(a.useContext)(T);return Object(p.jsxs)(K.a,{className:"position-absolute cardButtons",id:t,children:[Object(p.jsx)(S,{handleClick:i,id:"playMovie",faIcon:"play"}),Object(p.jsx)(S,{handleClick:r.toggleLike,id:"likeButton",faIcon:n}),Object(p.jsx)(S,{handleClick:r.deleteMovie,id:"removeMovie",faIcon:["fas","trash"]})]})},G=i(72);var Q=function(e){var t=e.handleClick,i=e.url,a=void 0===i?"":i,n=e.alt,r=void 0===n?"alternate text":n;return Object(p.jsx)(G.a,{onClick:t,top:!0,width:"100%",src:a,alt:r,style:{cursor:"pointer"}})},q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),i=Object(s.a)(t,2),n=i[0],r=i[1],c=function(){return r(!n)};return[{isOpen:n,handleModal:c}]};q.proptypes={initialState:A.a.oneOfType([A.a.bool,A.a.string]).isRequired};var $=q,H=i(91),W=i(73),X=i(74),Y=function(e){var t=e.isOpen,i=e.toggleVisibility,a=e.title,n=e.iframeUrl,r=document.getElementById("modal-container");return c.a.createPortal(Object(p.jsxs)(H.a,{isOpen:t,toggle:i,className:"modal-xl modal-dialog-centered","min-height":"900px",modalTransition:{timeout:700},backdropTransition:{timeout:1300},children:[" ",Object(p.jsx)(W.a,{toggle:i,children:a}),Object(p.jsx)(X.a,{children:Object(p.jsx)("div",{className:"embed-responsive embed-responsive-16by9",children:Object(p.jsx)("iframe",{title:a,src:n,width:"100%",height:"100%",allow:"autoplay",allowFullScreen:!0})})})]}),r)},Z=i(17),ee=i(36),te=i(37);Z.b.add(ee.a,te.a);var ie=function(e){var t=e.thumbnails,i=e.id,a=e.title,n=e.date,r=e.views,c=e.likes,l=e.liked,o=e.iframeUrl,d=$(),u=Object(s.a)(d,1)[0],j=u.isOpen,b=u.handleModal;return Object(p.jsxs)(x.a,{id:i,className:"h-100",children:[Object(p.jsxs)("div",{className:"image-container position-relative",children:[" ",Object(p.jsx)(Q,{url:t.standard.url,handleClick:b}),Object(p.jsx)("div",{className:"image-onhover",children:Object(p.jsx)("p",{children:"Play"})})]}),Object(p.jsxs)(g.a,{className:"h-100 position-relative",children:[Object(p.jsx)(Y,{isOpen:j,toggleVisibility:b,title:a,iframeUrl:o}),Object(p.jsx)(k.a,{tag:"h5",children:a}),Object(p.jsxs)(y.a,{children:["Added: ",n]}),Object(p.jsxs)(y.a,{children:["Viev count: ",r]}),Object(p.jsxs)(y.a,{children:["Like count: ",c]}),Object(p.jsx)(z,{id:i,handleModal:b,likeIconMode:l?["fas","heart"]:["far","heart"]})]})]})},ae=i(79),ne=function(e){var t=e.handleView,i=e.handleFiltering,n=e.btnValue,r=e.btnFilterValue,c=(window.innerWidth,Object(a.useContext)(T));return Object(p.jsx)(K.a,{className:"btn-group btn-group-sm d-flex justify-content-center",role:"group","aria-label":"...",children:Object(p.jsxs)(ae.a,{xs:"2",sm:"3",md:"6",className:"container-fluid",children:[Object(p.jsx)(S,{handleClick:function(){return t()},value:n,id:"toggleView"}),Object(p.jsx)(S,{handleClick:function(e){return c.loadDemo(e)},value:"Show demo",id:"loadDemo"}),Object(p.jsx)(S,{handleClick:function(e){return c.emptyList(e)},value:"Clear list",id:"clearList"}),Object(p.jsx)(S,{handleClick:function(){return c.sortByDate(!0)},value:"Sort by oldest",id:"sortByOldest"}),Object(p.jsx)(S,{handleClick:function(){return c.sortByDate(!1)},value:"Sort by newest",id:"sortByNewest"}),Object(p.jsx)(S,{handleClick:function(){return i()},value:r,id:"clearList"})]})})},re=i(84),ce=i(85),se=i(80);var le=function(e){var t=e.id,i=e.title,a=e.date,n=e.views,r=e.likes,c=e.thumbnails,l=e.liked,o=e.iframeUrl,d=$(),u=Object(s.a)(d,1)[0],j=u.isOpen,b=u.handleModal;return Object(p.jsxs)(se.a,{id:t,className:"position-relative w-100 mt-3",tag:"li",children:[Object(p.jsx)(Y,{isOpen:j,toggleVisibility:b,title:i,iframeUrl:o}),Object(p.jsx)(se.a,{left:!0,href:"#",className:"w-auto mr-5 d-flex",children:Object(p.jsxs)("div",{className:"image-container position-relative ml-0",children:[" ",Object(p.jsx)(se.a,{object:!0,src:c.standard.url,alt:"Generic placeholder image",onClick:b}),Object(p.jsx)("div",{className:"image-onhover",children:Object(p.jsx)("p",{children:"Play"})})]})}),Object(p.jsxs)(se.a,{body:!0,className:"mt-3",children:[Object(p.jsx)(se.a,{heading:!0,className:"w-75",children:i}),"Date added: ",a," / Views: ",n," / Likes: ",r,Object(p.jsx)(z,{id:t,handleModal:b,likeIconMode:l?["fas","heart"]:["far","heart"]})]})]})},oe=i(81),de=i(82),ue=i(83),je=function(e){for(var t=e.handleClick,i=e.itemsPerPage,a=e.totalItems,n=[],r=1;r<=Math.ceil(a/i);r++)n.push(r);return Object(p.jsxs)(oe.a,{className:"m-auto","aria-label":"Page navigation",children:[Object(p.jsx)(de.a,{id:"first",children:Object(p.jsx)(ue.a,{onClick:function(){return t(1)},first:!0,href:"#"})}),n.map((function(e){return Object(p.jsx)(de.a,{id:e,children:Object(p.jsx)(ue.a,{onClick:function(){return t(e)},href:"#",children:e})})})),Object(p.jsx)(de.a,{id:"last",children:Object(p.jsx)(ue.a,{onClick:function(){return t(n.length)},last:!0,href:"#"})})]})},be="Display tiles",he="Display list",me="Show all",pe="Show liked";var Oe=function(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),i=t[0],n=t[1],r=Object(a.useState)(be),c=Object(s.a)(r,2),l=c[0],o=c[1],d=Object(a.useState)(me),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),m=Object(s.a)(h,2),O=m[0],f=m[1],v=Object(a.useState)(1),x=Object(s.a)(v,2),g=x[0],k=x[1],y=Object(a.useState)(8),w=Object(s.a)(y,1)[0],N=Object(a.useContext)(T),C=Object(a.useState)(N.getStoredMovies()),D=Object(s.a)(C,2),M=D[0],E=D[1],L=M&&M.length,_=g*w,I=_-w,J=M&&M.slice(I,_);Object(a.useEffect)((function(){if(O)return k(1),void E(N.getFilteredMovies());E(N.getStoredMovies())}),[O,N]),Object(a.useEffect)((function(){o(i?he:be)}),[i]),Object(a.useEffect)((function(){b(O?me:pe)}),[O]);var A=Object(p.jsx)(je,{handleClick:function(e){k(e)},itemsPerPage:w,totalItems:L});return M?Object(p.jsxs)("main",{className:"container-fluid d-flex flex-column py-5 px-0 mt-3 mx-0 w-100",role:"main",children:[Object(p.jsx)(ne,{handleView:function(){n(!i)},handleFiltering:function(){f(!O)},btnValue:l,btnFilterValue:j}),i?Object(p.jsx)(K.a,{fluid:"true",className:"px-4",children:Object(p.jsx)(ae.a,{xs:"1",md:"2",lg:"4",xl:"10",children:Object(p.jsx)(p.Fragment,{children:J.map((function(e){return Object(p.jsx)(ce.a,{className:"my-2 align-items-stretch",children:Object(p.jsx)(ie,{id:e.id,title:e.snippet.title,date:e.addDate,views:e.statistics.viewCount,likes:e.statistics.likeCount,thumbnails:e.snippet.thumbnails,liked:e.isLiked,iframeUrl:e.iframe})},e.id)}))})})}):Object(p.jsx)(K.a,{children:Object(p.jsx)(re.a,{type:"unstyled",children:J.map((function(e){return Object(p.jsx)(le,{id:e.id,title:e.snippet.title,date:e.addDate,views:e.statistics.viewCount,likes:e.statistics.likeCount,thumbnails:e.snippet.thumbnails,liked:e.isLiked,iframeUrl:e.iframe},e.id)}))})}),L>w?A:null]}):Object(p.jsx)("main",{className:"container d-flex vh-100",role:"main",children:Object(p.jsxs)("div",{className:"m-auto",children:[Object(p.jsx)("h5",{children:"No movies, add some to your list or load demo:"}),Object(p.jsx)(S,{handleClick:function(e){return N.loadDemo(e)},value:"Show demo",id:"loadDemo"})]})})};var fe=function(){return Object(p.jsx)(Oe,{})},ve=i(88),xe=i(89),ge=i(90),ke=i(86);var ye=function(e){var t=e.name,i=void 0===t?"":t,a=e.id,n=void 0===a?"":a,r=e.type,c=void 0===r?"text":r,s=e.placeholder,l=e.onchangeHandler,o=e.ariaLabelledby,d=void 0===o?"":o;return Object(p.jsx)(ke.a,{name:i,id:n,type:c,placeholder:s,onChange:function(e){return l(e)},ariaLabelledby:d})},we=i(87);var Ne=function(e){var t=e.id,i=void 0===t?"":t,a=e.labelValue,n=void 0===a?"":a;return Object(p.jsx)(we.a,{htmlFor:i,hidden:!0,children:n})};var Se=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),i=t[0],n=t[1],r=Object(a.useContext)(T);return Object(p.jsx)("main",{className:"container d-flex vh-100",role:"main",children:r.isError?Object(p.jsxs)("div",{className:"m-auto",children:[Object(p.jsx)("h2",{children:"Something went wrong, try again later"}),Object(p.jsx)(S,{handleClick:function(){return r.resetErrorAlert()},id:"closeAlert",value:"Try again"})]}):Object(p.jsx)("div",{className:"m-auto",children:r.isLoading?Object(p.jsx)(ve.a,{color:"info"}):Object(p.jsx)(xe.a,{inline:!0,onSubmit:function(e){return r.getMovieData(e,i)},children:Object(p.jsxs)(ge.a,{className:"mb-2 mr-sm-2 mb-sm-0",children:[Object(p.jsx)(Ne,{id:"url",labelName:"URL/ID",labelValue:"URL or video's id"}),Object(p.jsx)(ye,{name:"movieURL",id:"url",type:"text",placeholder:"Type video url or id...",value:i,onchangeHandler:function(e){e.preventDefault(),n(e.target.value)}}),Object(p.jsx)(S,{type:"submit",value:"Get movie!",id:"getMovie"})]})})})})};var Ce=function(){return Object(p.jsx)(Se,{})},De=(i(60),i(61),i(10)),Me=function(){return Object(p.jsx)(l.a,{basename:"/video_app_04_2021",children:Object(p.jsx)(B,{children:Object(p.jsx)(v,{children:Object(p.jsxs)(De.c,{children:[Object(p.jsx)(De.a,{path:"/",exact:!0,children:Object(p.jsx)(Ce,{})}),Object(p.jsx)(De.a,{path:"/movie-list",exact:!0,children:Object(p.jsx)(fe,{})})]})})})})};c.a.render(Object(p.jsx)(a.StrictMode,{children:Object(p.jsx)(Me,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.d81d71d7.chunk.js.map